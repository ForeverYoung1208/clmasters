(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{20:function(e,t,a){e.exports=a.p+"static/media/glow_clock2.e3dc12cf.png"},23:function(e,t,a){e.exports=a(47)},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),o=a.n(c),s=(a(28),a(29),a(5)),i=r.a.createContext(),l=a(1),u=(a(30),function(e){return r.a.createElement("div",{className:"card"},r.a.createElement("h2",null,e.header),e.children)}),m=(a(31),function(){return r.a.createElement("div",{className:"adminPage"},r.a.createElement(u,{header:"Order Page here"},"Order Page text here"))}),h=a(7),d=a.n(h),p=a(10),f=a(11),g=a(9),E=a(4),v=(a(33),function(e){return r.a.createElement("button",{type:"button",onClick:e.onClick,className:"btn-sm"},e.children)}),b=(a(34),function(){var e=Object(n.useState)({email:"",password:""}),t=Object(E.a)(e,2),a=t[0],c=t[1],o=function(){var e=Object(n.useState)(!1),t=Object(E.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),o=Object(E.a)(c,2),s=o[0],i=o[1];return{isLoading:a,request:Object(n.useCallback)(function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n,c,o,s,l=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:"GET",n=l.length>2&&void 0!==l[2]?l[2]:null,c=l.length>3&&void 0!==l[3]?l[3]:{},e.prev=3,r(!0),n&&JSON.stringify(n),c=Object(g.a)({},c,{"Content-Type":"application/json"}),e.next=9,fetch("http://localhost:5000"+t,{method:a,body:n,headers:c});case 9:return o=e.sent,e.next=12,o.json();case 12:if(s=e.sent,r(!1),o.ok){e.next=16;break}throw new Error("Smthng wrong with http request ".concat(a,", ").concat(t,", ").concat(JSON.stringify(c),", ").concat(JSON.stringify(n),"; got message: ").concat(null===s||void 0===s?void 0:s.message));case 16:return e.abrupt("return",s);case 19:throw e.prev=19,e.t0=e.catch(3),r(!1),i(e.t0.message),e.t0;case 24:case"end":return e.stop()}}),e,null,[[3,19]])})));return function(t){return e.apply(this,arguments)}}(),[]),error:s,clearError:function(){i(null)}}}(),s=o.isLoading,m=o.request,h=Object(n.useContext)(i).auth,b=Object(l.g)(),O=function(e){c(Object(g.a)({},a,Object(f.a)({},e.target.name,e.target.value)))},w=function(){var e=Object(p.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m("/api/auth/login","POST",JSON.stringify(Object(g.a)({},a)));case 3:t=e.sent,n=t.user,h.login(n),b.push("/user"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("[err]",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"authPage"},r.a.createElement(u,{header:"Authentication"},r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",name:"email",id:"email",onChange:O,disabled:s}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",id:"password",onChange:O,disabled:s}),r.a.createElement(v,{type:"button",onClick:w,disabled:s},"Login"))))}),O=(a(40),function(){return r.a.createElement("div",{className:"mastersPage"},r.a.createElement(u,{header:"Masters Page here"},"Masters Page text here"))}),w=function(e){return r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/info",exact:!0},r.a.createElement("div",null,"info page here")),r.a.createElement(l.b,{path:"/masters",exact:!0},r.a.createElement(O,null)),r.a.createElement(l.b,{path:"/login",exact:!0},r.a.createElement(b,null)),r.a.createElement(l.b,{path:"/user",exact:!0},"UserPage"),(null===e||void 0===e?void 0:e.isAdmin)&&r.a.createElement(l.b,{path:"/admin",exact:!0},r.a.createElement(m,null)),r.a.createElement(l.a,{to:"/info"}))},N=a(20),j=a.n(N),S=(a(41),function(e){return e.isShown&&r.a.createElement(s.b,{to:e.path,className:"menu__menuItem",activeClassName:"menu__menuItem__active"},e.children)}),x=a(48),k=(a(42),function(){var e=Object(n.useContext)(i).auth,t=function(e){var t=function(e){return[{name:"Info",path:"/info",isShown:!0},{name:"Find master",path:"/masters",isShown:!0},{name:"Login",path:"/login",isShown:!(null===e||void 0===e?void 0:e.email)},{name:"User page",path:"/user",isShown:!0},{name:"Administration",path:"/admin",isShown:!(!e||!e.isAdmin)}]},a=Object(n.useState)({items:t(e)}),r=Object(E.a)(a,2),c=r[0],o=r[1];return{menuItems:c,updateMenuItems:function(e){o({items:t(e)})}}}(e.currentUser),a=t.menuItems,c=t.updateMenuItems;return Object(n.useEffect)((function(){c(e.currentUser)}),[e.currentUser]),r.a.createElement(x.a,{in:!!e.currentUser,timeout:300,classNames:"appear"},r.a.createElement("div",{className:"menu"},a.items.map((function(e){return r.a.createElement(S,{key:e.name,isShown:e.isShown,path:e.path},e.name)}))))}),_=(a(45),function(){var e=Object(n.useContext)(i).auth;return r.a.createElement(x.a,{in:!!e.currentUser,timeout:300,classNames:"appear",unmountOnExit:!0},r.a.createElement(r.a.Fragment,null,e.currentUser&&r.a.createElement("div",{className:"userinfo-email"},e.currentUser.email),r.a.createElement("button",{onClick:e.logout}," Log out")))}),y=(a(46),function(){return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"header__logo"},r.a.createElement("img",{src:j.a,alt:"logo"}),r.a.createElement("div",{className:"caption"}," Clock Masters")),r.a.createElement("div",{className:"header__menu"},r.a.createElement(k,null)),r.a.createElement("div",{className:"header__user-info"},r.a.createElement(_,{key:"userInfo"})))});var C=function(){var e=function(){var e=Object(n.useState)(),t=Object(E.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&r(e)}),[r]),{currentUser:a,login:function(e){localStorage.setItem("userData",JSON.stringify(e)),r(e)},logout:function(){r(null),localStorage.removeItem("userData")}}}(),t=e.currentUser,a=e.login,c=e.logout,o=w(t);return r.a.createElement(i.Provider,{value:{auth:{currentUser:t,login:a,logout:c}}},r.a.createElement("div",{className:"app"},r.a.createElement(s.a,null,r.a.createElement("div",{className:"app__header"},r.a.createElement(y,null)),r.a.createElement("div",{className:"app__content"},o),r.a.createElement("footer",{className:"app__footer"},"By Ihor S., 2020"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.75307968.chunk.js.map